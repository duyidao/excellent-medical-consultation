import{M as b}from"./MySvgIcon-5cvDMJXN.js";import{r as F,s as U}from"./index-5hrCnXoF.js";import{e as g,d as S,r as _,o as p,c as w,f as s,a as n,t as v,w as l,b as C,u as k,F as N,g as L,h as $,_ as M,i as O,n as K,j as q,k as Q,l as A,m as V,p as Y,q as R,s as j,v as z}from"./index-zhWR9-Ye.js";const H="/excellent-medical-consultation/assets/ad-GVbUr23F.png",J=e=>F("/patient/home/knowledge","GET",e),X=e=>F("/home/page/doc","GET",e),Z=(e,o="doc")=>F("/like","POST",{id:e,type:o}),B=(e="doc")=>{const o=g(!1);return{loading:o,follow:async t=>{o.value=!0;try{await Z(t.id,e),t.likeFlag=t.likeFlag===1?0:1}finally{o.value=!1}}}},x={class:"knowledge-card van-hairline--bottom"},ee={class:"head"},te={class:"info"},ne={class:"name"},se={class:"dep van-ellipsis"},oe={class:"body"},ae={class:"title van-ellipsis"},ie={class:"tag"},le=["innerHTML"],ce={class:"imgs"},re={class:"logs"},de=S({__name:"KnowledgeCard",props:{item:{}},setup(e){const{loading:o,follow:a}=B("knowledge");return(t,i)=>{const d=_("van-image"),r=_("van-button");return p(),w("div",x,[s("div",ee,[n(d,{round:"",class:"avatar",src:t.item.creatorAvatar},null,8,["src"]),s("div",te,[s("p",ne,v(t.item.creatorName),1),s("p",se,v(t.item.creatorHospatalName)+" "+v(t.item.creatorDep)+" "+v(t.item.creatorTitles),1)]),n(r,{class:"btn",size:"small",loading:k(o),onClick:i[0]||(i[0]=c=>k(a)(t.item)),round:""},{default:l(()=>[C(v(t.item.likeFlag===1?"已关注":"+ 关注"),1)]),_:1},8,["loading"])]),s("div",oe,[s("h3",ae,v(t.item.title),1),s("p",ie,[(p(!0),w(N,null,L(t.item.topic.split(","),(c,u)=>(p(),w("span",{key:u},"# "+v(c),1))),128))]),s("p",{class:"intro van-multi-ellipsis--l2",innerHTML:t.item.content},null,8,le),s("div",ce,[(p(!0),w(N,null,L(t.item.coverUrl,(c,u)=>(p(),$(d,{key:u,src:c},null,8,["src"]))),128))]),s("p",re,[s("span",null,v(t.item.collectionNumber)+" 收藏",1),s("span",null,v(t.item.commentNumber)+" 评论",1)])])])}}}),ue=M(de,[["__scopeId","data-v-83913dd3"]]),_e={class:"knowledge-list"},T=S({__name:"KnowledgeList",props:{type:{}},setup(e){const a=g({type:e.type,current:1,pageSize:10}),t=g([]),i=g(!1),d=g(!1),r=async()=>{if(d.value)return U("当前已经是最后的数据");i.value=!0;const c=await J(a.value);t.value.push(...c.data.rows),a.value.current>=c.data.pageTotal?d.value=!0:a.value.current++,i.value=!1};return(c,u)=>{const m=_("van-list");return p(),w("div",_e,[n(m,{loading:i.value,"onUpdate:loading":u[0]||(u[0]=f=>i.value=f),finished:d.value,"finished-text":"没有更多了",onLoad:r},{default:l(()=>[(p(!0),w(N,null,L(t.value,f=>(p(),$(ue,{key:f.id,item:f},null,8,["item"]))),128))]),_:1},8,["loading","finished"])])}}}),pe={class:"doctor-card"},me={class:"name"},fe={class:"van-ellipsis"},ve=S({__name:"DoctorCard",props:{item:{}},setup(e){const{loading:o,follow:a}=B();return(t,i)=>{const d=_("van-image"),r=_("van-button");return p(),w("div",pe,[n(d,{round:"",src:t.item.avatar},null,8,["src"]),s("p",me,v(t.item.name),1),s("p",fe,v(t.item.hospitalName)+" "+v(t.item.depName),1),s("p",null,v(t.item.positionalTitles),1),n(r,{round:"",loading:k(o),onClick:i[0]||(i[0]=c=>k(a)(t.item)),size:"small",type:"primary"},{default:l(()=>[C(v(t.item.likeFlag===1?"已关注":"+ 关注"),1)]),_:1},8,["loading"])])}}}),he=M(ve,[["__scopeId","data-v-fc28257f"]]);function G(e){return q()?(Q(e),!0):!1}function D(e){return typeof e=="function"?e():k(e)}const ge=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const we=Object.prototype.toString,ye=e=>we.call(e)==="[object Object]",be=()=>{};function ke(e){return e||A()}function $e(e,o=!0,a){ke()?O(e,a):o?e():K(e)}function Se(e){var o;const a=D(e);return(o=a==null?void 0:a.$el)!=null?o:a}const W=ge?window:void 0;function Ie(...e){let o,a,t,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([a,t,i]=e,o=W):[o,a,t,i]=e,!o)return be;Array.isArray(a)||(a=[a]),Array.isArray(t)||(t=[t]);const d=[],r=()=>{d.forEach(f=>f()),d.length=0},c=(f,y,I,E)=>(f.addEventListener(y,I,E),()=>f.removeEventListener(y,I,E)),u=V(()=>[Se(o),D(i)],([f,y])=>{if(r(),!f)return;const I=ye(y)?{...y}:y;d.push(...a.flatMap(E=>t.map(P=>c(f,E,P,I))))},{immediate:!0,flush:"post"}),m=()=>{u(),r()};return G(m),m}function Ee(){const e=g(!1);return A()&&O(()=>{e.value=!0}),e}function Te(e){const o=Ee();return R(()=>(o.value,!!e()))}function Ne(e,o={}){const{window:a=W}=o,t=Te(()=>a&&"matchMedia"in a&&typeof a.matchMedia=="function");let i;const d=g(!1),r=m=>{d.value=m.matches},c=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",r):i.removeListener(r))},u=Y(()=>{t.value&&(c(),i=a.matchMedia(D(e)),"addEventListener"in i?i.addEventListener("change",r):i.addListener(r),d.value=i.matches)});return G(()=>{u(),c(),i=void 0}),d}function Le(e={}){const{window:o=W,initialWidth:a=Number.POSITIVE_INFINITY,initialHeight:t=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:d=!0}=e,r=g(a),c=g(t),u=()=>{o&&(d?(r.value=o.innerWidth,c.value=o.innerHeight):(r.value=o.document.documentElement.clientWidth,c.value=o.document.documentElement.clientHeight))};if(u(),$e(u),Ie("resize",u,{passive:!0}),i){const m=Ne("(orientation: portrait)");V(m,()=>u())}return{width:r,height:c}}const Ce=e=>(j("data-v-8e75fd25"),e=e(),z(),e),Me={class:"follow-doctor"},Fe=Ce(()=>s("div",{className:"head"},[s("p",null,"推荐关注"),s("a",{href:"javascript:;"},[C(" 查看更多"),s("i",{class:"van-icon van-icon-arrow"})])],-1)),Oe={class:"body"},De=S({__name:"FollowDoctor",setup(e){const{width:o}=Le(),a=g();return O(async()=>{const t=await X({current:1,pageSize:5});console.log(t),a.value=t.data.rows}),(t,i)=>{var u;const d=_("van-swipe-item"),r=_("van-swipe"),c=_("van-empty");return p(),w("div",Me,[Fe,s("div",Oe,[(u=a.value)!=null&&u.length?(p(),$(r,{key:0,width:150/375*k(o),"show-indicators":!1,loop:!1},{default:l(()=>[(p(!0),w(N,null,L(a.value,m=>(p(),$(d,{key:m.id},{default:l(()=>[n(he,{item:m},null,8,["item"])]),_:2},1024))),128))]),_:1},8,["width"])):(p(),$(c,{key:1,image:"error",description:"暂无数据"}))])])}}}),We=M(De,[["__scopeId","data-v-8e75fd25"]]),h=e=>(j("data-v-f30729bf"),e=e(),z(),e),Ae={class:"home-page"},Ve={class:"home-header"},je={class:"con"},ze=h(()=>s("h1",null,"优医",-1)),He={class:"search"},Be={class:"home-navs"},Ge=h(()=>s("p",{class:"title"},"问医生",-1)),Pe=h(()=>s("p",{class:"desc"},"按科室查问医生",-1)),Ue=h(()=>s("p",{class:"title"},"极速问诊",-1)),Ke=h(()=>s("p",{class:"desc"},"20s医生极速回复",-1)),qe=h(()=>s("p",{class:"title"},"开药门诊",-1)),Qe=h(()=>s("p",{class:"desc"},"线上买药更方便",-1)),Ye=h(()=>s("p",{class:"title"},"药品订单",-1)),Re=h(()=>s("p",{class:"title"},"健康档案",-1)),Je=h(()=>s("p",{class:"title"},"我的处方",-1)),Xe=h(()=>s("p",{class:"title"},"疾病查询",-1)),Ze={class:"home-banner"},xe=h(()=>s("img",{src:H,alt:""},null,-1)),et=h(()=>s("img",{src:H,alt:""},null,-1)),tt=S({__name:"index",setup(e){const o=g(0);return(a,t)=>{const i=_("van-tab"),d=_("van-tabs"),r=_("router-link"),c=_("van-col"),u=_("van-row"),m=_("van-swipe-item"),f=_("van-swipe");return p(),w("div",Ae,[s("div",Ve,[s("div",je,[ze,s("div",He,[n(b,{name:"home-search"}),C(" 搜一搜：疾病/症状/医生/健康知识 ")])])]),n(d,{shrink:"",sticky:"",active:o.value,"onUpdate:active":t[0]||(t[0]=y=>o.value=y)},{default:l(()=>[n(i,{title:"关注"},{default:l(()=>[n(We),n(T,{type:"like"})]),_:1}),n(i,{title:"推荐"},{default:l(()=>[n(T,{type:"recommend"})]),_:1}),n(i,{title:"减脂"},{default:l(()=>[n(T,{type:"fatReduction"})]),_:1}),n(i,{title:"饮食"},{default:l(()=>[n(T,{type:"food"})]),_:1})]),_:1},8,["active"]),s("div",Be,[n(u,null,{default:l(()=>[n(c,{span:"8"},{default:l(()=>[n(r,{to:"/",class:"nav"},{default:l(()=>[n(b,{name:"home-doctor"}),Ge,Pe]),_:1})]),_:1}),n(c,{span:"8"},{default:l(()=>[n(r,{to:"/consult/fast",class:"nav"},{default:l(()=>[n(b,{name:"home-graphic"}),Ue,Ke]),_:1})]),_:1}),n(c,{span:"8"},{default:l(()=>[n(r,{to:"/",class:"nav"},{default:l(()=>[n(b,{name:"home-prescribe"}),qe,Qe]),_:1})]),_:1})]),_:1}),n(u,null,{default:l(()=>[n(c,{span:"6"},{default:l(()=>[n(r,{to:"/",class:"nav min"},{default:l(()=>[n(b,{name:"home-order"}),Ye]),_:1})]),_:1}),n(c,{span:"6"},{default:l(()=>[n(r,{to:"/",class:"nav min"},{default:l(()=>[n(b,{name:"home-docs"}),Re]),_:1})]),_:1}),n(c,{span:"6"},{default:l(()=>[n(r,{to:"/",class:"nav min"},{default:l(()=>[n(b,{name:"home-rp"}),Je]),_:1})]),_:1}),n(c,{span:"6"},{default:l(()=>[n(r,{to:"/",class:"nav min"},{default:l(()=>[n(b,{name:"home-find"}),Xe]),_:1})]),_:1})]),_:1})]),s("div",Ze,[n(f,{"indicator-color":"#fff"},{default:l(()=>[n(m,null,{default:l(()=>[xe]),_:1}),n(m,null,{default:l(()=>[et]),_:1})]),_:1})])])}}}),at=M(tt,[["__scopeId","data-v-f30729bf"]]);export{at as default};
