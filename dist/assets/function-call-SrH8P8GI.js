import{m as R,u as _}from"./index-5hrCnXoF.js";import{D as F,E as m,G as K,H as I,I as U,J as L,K as y,L as M,d as W,e as z,M as V,N as G,a as o,O as S,P as J,Q,R as X,S as k,T as Y,U as P,V as Z,W as $,X as T,Y as j,Z as q,$ as p}from"./index-zhWR9-Ye.js";const[ee,a,f]=F("dialog"),te=m({},K,{title:String,theme:String,width:I,message:[String,Function],callback:Function,allowHtml:Boolean,className:U,transition:L("van-dialog-bounce"),messageAlign:String,closeOnPopstate:y,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:y,closeOnClickOverlay:Boolean}),ne=[...M,"transition","closeOnPopstate"];var oe=W({name:ee,props:te,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:r,slots:l}){const u=z(),i=V({confirm:!1,cancel:!1}),C=t=>r("update:show",t),b=t=>{var n;C(!1),(n=e.callback)==null||n.call(e,t)},v=t=>()=>{e.show&&(r(t),e.beforeClose?(i[t]=!0,q(e.beforeClose,{args:[t],done(){b(t),i[t]=!1},canceled(){i[t]=!1}})):b(t))},B=v("cancel"),g=v("confirm"),x=G(t=>{var n,s;if(t.target!==((s=(n=u.value)==null?void 0:n.popupRef)==null?void 0:s.value))return;({Enter:e.showConfirmButton?g:k,Escape:e.showCancelButton?B:k})[t.key](),r("keydown",t)},["enter","esc"]),D=()=>{const t=l.title?l.title():e.title;if(t)return o("div",{class:a("header",{isolated:!e.message&&!l.default})},[t])},O=t=>{const{message:n,allowHtml:s,messageAlign:c}=e,d=a("message",{"has-title":t,[c]:c}),w=Y(n)?n():n;return s&&typeof w=="string"?o("div",{class:d,innerHTML:w},null):o("div",{class:d},[w])},E=()=>{if(l.default)return o("div",{class:a("content")},[l.default()]);const{title:t,message:n,allowHtml:s}=e;if(n){const c=!!(t||l.title);return o("div",{key:s?1:0,class:a("content",{isolated:!c})},[O(c)])}},N=()=>o("div",{class:[$,a("footer")]},[e.showCancelButton&&o(P,{size:"large",text:e.cancelButtonText||f("cancel"),class:a("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&o(P,{size:"large",text:e.confirmButtonText||f("confirm"),class:[a("confirm"),{[Z]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]),A=()=>o(j,{class:a("footer")},{default:()=>[e.showCancelButton&&o(T,{type:"warning",text:e.cancelButtonText||f("cancel"),class:a("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&o(T,{type:"danger",text:e.confirmButtonText||f("confirm"),class:a("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]}),H=()=>l.footer?l.footer():e.theme==="round-button"?A():N();return()=>{const{width:t,title:n,theme:s,message:c,className:d}=e;return o(X,S({ref:u,role:"dialog",class:[a([s]),d],style:{width:Q(t)},tabindex:0,"aria-labelledby":n||c,onKeydown:x,"onUpdate:show":C},J(e,ne)),{default:()=>[D(),E(),H()]})}}});let h;const le={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let ae=m({},le);function se(){({instance:h}=R({setup(){const{state:r,toggle:l}=_();return()=>o(oe,S(r,{"onUpdate:show":l}),null)}}))}function ce(e){return p?new Promise((r,l)=>{h||se(),h.open(m({},ae,e,{callback:u=>{(u==="confirm"?r:l)(u)}}))}):Promise.resolve(void 0)}const ue=e=>ce(m({showCancelButton:!0},e));export{ue as a,oe as s};
