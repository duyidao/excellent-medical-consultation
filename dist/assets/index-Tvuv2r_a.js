import{d as q,y as A,z as P,a0 as z,e as s,a1 as Z,r as i,o as C,c as D,a as n,f as e,t as g,w as d,u as b,h as y,A as E,B as L,b as k,s as G,v as H,_ as J}from"./index-zhWR9-Ye.js";import{M as K,m as O,p as Q,c as W}from"./index-2B8i8twh.js";import{l as X,c as Y,f as ee}from"./user-AWwG0ggx.js";import{b as x,a as U}from"./index-5hrCnXoF.js";const ae="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1979_13714)'%3e%3cpath%20d='M30%200C13.433%200%200%2013.433%200%2030C0%2046.567%2013.433%2060%2030%2060C46.567%2060%2060%2046.567%2060%2030C60%2013.433%2046.567%200%2030%200ZM44.096%2041.0089C43.3259%2041.1027%2041.0893%2037.4799%2041.0893%2037.4799C41.0893%2039.5759%2040.0045%2042.3147%2037.6674%2044.2969C38.7991%2044.6451%2041.3438%2045.5826%2040.7411%2046.6004C40.2522%2047.4241%2032.3304%2047.1295%2030.0402%2046.8683C27.75%2047.1228%2019.8281%2047.4241%2019.3393%2046.6004C18.7299%2045.5826%2021.2746%2044.6451%2022.4062%2044.2969C20.0625%2042.3214%2018.9844%2039.5826%2018.9844%2037.4799C18.9844%2037.4799%2016.7478%2041.1027%2015.9777%2041.0089C15.6161%2040.9621%2015.1473%2039.0268%2016.6071%2034.3326C17.2969%2032.1228%2018.0804%2030.2812%2019.2991%2027.2478C19.0915%2019.4196%2022.3326%2012.8504%2030.0402%2012.8504C37.6674%2012.8504%2040.9754%2019.2857%2040.7812%2027.2478C41.9933%2030.2746%2042.7835%2032.1228%2043.4732%2034.3326C44.9263%2039.0268%2044.4509%2040.9688%2044.096%2041.0089V41.0089Z'%20fill='%2300AAFF'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_1979_13714'%3e%3crect%20width='60'%20height='60'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",r=v=>(G("data-v-9a017ccc"),v=v(),H(),v),oe={class:"login-page"},se={class:"login-head"},te={class:"cp-cell"},le=r(()=>e("span",null,"我已同意",-1)),ne=r(()=>e("a",{href:"javascript:;"},"用户协议",-1)),ce=r(()=>e("span",null,"及",-1)),ie=r(()=>e("a",{href:"javascript:;"},"隐私条款",-1)),re={class:"cp-cell"},ue=r(()=>e("div",{class:"cp-cell"},[e("a",{href:"javascript:;"},"忘记密码？")],-1)),de={class:"login-other"},ve=r(()=>e("div",{class:"icon"},[e("img",{src:ae,alt:""})],-1)),pe=q({__name:"index",setup(v){const B=A(),I=P(),S=z(),u=s("13230000001"),m=s("abc12345"),p=s(""),_=s(!1),c=s(!0),V=s(),f=s("发送验证码"),t=s(0);let h=null;const R=async()=>{var a;if(t.value>0)return x(`等待${t.value}秒后再试`);await((a=V.value)==null?void 0:a.validate("mobile")),t.value=60,h=window.setInterval(()=>{t.value-=1,f.value=`${t.value}秒后重试`,t.value===0&&(f.value="重新发送验证码",window.clearInterval(h))},1e3);const l=await ee({mobile:u.value,type:"login"});U("发送成功"),p.value=l.data.code};Z(()=>window.clearInterval(h));const M=async()=>{if(!_.value)return x("请先勾选用户协议");let l=null;c.value?l=await X({mobile:u.value,password:m.value}):l=await Y({mobile:u.value,code:p.value}),B.setUser(l.data),I.replace(S.query.returnUrl||"/"),U("登录成功")};return(l,a)=>{const T=i("van-icon"),w=i("van-field"),$=i("van-checkbox"),j=i("van-button"),F=i("van-form"),N=i("van-divider");return C(),D("div",oe,[n(K,{"right-text":"注册",onClickRight:a[0]||(a[0]=o=>l.$router.push("/register"))}),e("div",se,[e("h3",null,g(c.value?"密码登录":"短信验证码登录"),1),e("a",{href:"javascript:;",onClick:a[1]||(a[1]=o=>c.value=!c.value)},[e("span",null,g(c.value?"短信验证码登录":"密码登录"),1),n(T,{name:"arrow"})])]),n(F,{ref_key:"form",ref:V,autocomplete:"off",onSubmit:M},{default:d(()=>[n(w,{placeholder:"请输入手机号",required:"",modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=o=>u.value=o),type:"tel",name:"mobile",rules:b(O)},null,8,["modelValue","rules"]),c.value?(C(),y(w,{key:0,placeholder:"请输入密码",required:"",type:"password",name:"password",modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=o=>m.value=o),rules:b(Q)},null,8,["modelValue","rules"])):(C(),y(w,{key:1,placeholder:"短信验证码",name:"code",modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=o=>p.value=o),rules:b(W)},{button:d(()=>[e("span",{class:E(["btn-send",{active:t.value>0}]),onClick:L(R,["stop"])},g(f.value),3)]),_:1},8,["modelValue","rules"])),e("div",te,[n($,{modelValue:_.value,"onUpdate:modelValue":a[5]||(a[5]=o=>_.value=o)},{default:d(()=>[le,ne,ce,ie]),_:1},8,["modelValue"])]),e("div",re,[n(j,{block:"",round:"",type:"primary","native-type":"submit"},{default:d(()=>[k(" 登 录 ")]),_:1})]),ue]),_:1},512),e("div",de,[n(N,null,{default:d(()=>[k("第三方登录")]),_:1}),ve])])}}}),we=J(pe,[["__scopeId","data-v-9a017ccc"]]);export{we as default};
